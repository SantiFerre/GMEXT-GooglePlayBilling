<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>BillingClient - GMEXT-GooglePlayBilling</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
        <link href="assets/css/gmext_style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "BillingClient";
        var mkdocs_page_input_path = "billingclient.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/gml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> GMEXT-GooglePlayBilling
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="home.html">Google Play Billing</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="using_the_google_play_iap_extension.html">Using The Google Play IAP Extension</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="quick_start_guide.html">Quick Start Guide</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">BillingClient</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#structs">Structs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#constants">Constants</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">GMEXT-GooglePlayBilling</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">BillingClient</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/YoYoGames/GMEXT-GooglePlayBilling/edit/master/docs/billingclient.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><a id="top"></a></p>
<h1 id="billingclient"><strong>BillingClient</strong></h1>
<blockquote>
<p><strong>Google Play Billing package:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/package-summary">com.android.billingclient.api</a></p>
</blockquote>
<h2 id="functions">Functions</h2>
<p>These are the functions available in the Google Play Billing extension:</p>
<ul>
<li><a href="billingclient.html#gpbilling_init">GPBilling_Init</a></li>
<li><a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a></li>
<li><a href="billingclient.html#gpbilling_isstoreconnected">GPBilling_IsStoreConnected</a></li>
<li><a href="billingclient.html#gpbilling_getstatus">GPBilling_GetStatus</a></li>
<li><a href="billingclient.html#gpbilling_addproduct">GPBilling_AddProduct</a></li>
<li><a href="billingclient.html#gpbilling_addsubscription">GPBilling_AddSubscription</a></li>
<li><a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a></li>
<li><a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a></li>
<li><a href="billingclient.html#gpbilling_purchaseproduct">GPBilling_PurchaseProduct</a></li>
<li><a href="billingclient.html#gpbilling_purchasesubscription">GPBilling_PurchaseSubscription</a></li>
<li><a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a></li>
<li><a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a></li>
<li><a href="billingclient.html#gpbilling_sku_getdescription">GPBilling_Sku_GetDescription</a></li>
<li><a href="billingclient.html#gpbilling_sku_getfreetrialperiod">GPBilling_Sku_GetFreeTrialPeriod</a></li>
<li><a href="billingclient.html#gpbilling_sku_geticonurl">GPBilling_Sku_GetIconUrl</a></li>
<li><a href="billingclient.html#gpbilling_sku_getintroductoryprice">GPBilling_Sku_GetIntroductoryPrice</a></li>
<li><a href="billingclient.html#gpbilling_sku_getintroductorypriceamountmicros">GPBilling_Sku_GetIntroductoryPriceAmountMicros</a></li>
<li><a href="billingclient.html#gpbilling_sku_getintroductorypricecycles">GPBilling_Sku_GetIntroductoryPriceCycles</a></li>
<li><a href="billingclient.html#gpbilling_sku_getintroductorypriceperiod">GPBilling_Sku_GetIntroductoryPricePeriod</a></li>
<li><a href="billingclient.html#gpbilling_sku_getoriginaljson">GPBilling_Sku_GetOriginalJson</a></li>
<li><a href="billingclient.html#gpbilling_sku_getoriginalprice">GPBilling_Sku_GetOriginalPrice</a></li>
<li><a href="billingclient.html#gpbilling_sku_getoriginalpriceamountmicros">GPBilling_Sku_GetOriginalPriceAmountMicros</a></li>
<li><a href="billingclient.html#gpbilling_sku_getprice">GPBilling_Sku_GetPrice</a></li>
<li><a href="billingclient.html#gpbilling_sku_getpriceamountmicros">GPBilling_Sku_GetPriceAmountMicros</a></li>
<li><a href="billingclient.html#gpbilling_sku_getpricecurrencycode">GPBilling_Sku_GetPriceCurrencyCode</a></li>
<li><a href="billingclient.html#gpbilling_sku_getsubscriptionperiod">GPBilling_Sku_GetSubscriptionPeriod</a></li>
<li><a href="billingclient.html#gpbilling_sku_gettitle">GPBilling_Sku_GetTitle</a></li>
<li><a href="billingclient.html#gpbilling_sku_gettype">GPBilling_Sku_GetType</a></li>
<li><a href="billingclient.html#gpbilling_purchase_getstate">GPBilling_Purchase_GetState</a></li>
<li><a href="billingclient.html#gpbilling_purchase_getsignature">GPBilling_Purchase_GetSignature</a></li>
<li><a href="billingclient.html#gpbilling_purchase_verifysignature">GPBilling_Purchase_VerifySignature</a></li>
<li><a href="billingclient.html#gpbilling_purchase_getoriginaljson">GPBilling_Purchase_GetOriginalJson</a></li>
<li><a href="billingclient.html#gpbilling_querypurchasesasync">GPBilling_QueryPurchasesAsync</a></li>
</ul>
<h2 id="structs">Structs</h2>
<p>These are the structs returned by the Google Play Billing extension:</p>
<ul>
<li><a href="billingclient.html#sku_details">sku_details</a></li>
<li><a href="billingclient.html#purchase">purchase</a></li>
</ul>
<h2 id="constants">Constants</h2>
<p>These are the constants used by the Google Play Billing extension:</p>
<ul>
<li><a href="billingclient.html#gpb_event_type">gpb_event_type</a></li>
<li><a href="billingclient.html#gpb_error_type">gpb_error_type</a></li>
<li><a href="billingclient.html#gpb_purchase_state">gpb_purchase_state</a></li>
<li><a href="billingclient.html#gpb_purchase_skutype">gpb_purchase_skutype</a></li>
</ul>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_init">GPBilling_Init</h1>
<p>This function initialises the Google Play Billing API.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default this is set as the extension's Init function and called automatically. You can also call the function yourself manually. Subsequent calls to the function won't do anything.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Init()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">GPBilling_Init();</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_connecttostore">GPBilling_ConnectToStore</h1>
<p>This function will attempt to connect the Google Play Billing API with the Play Store.</p>
<p>The function will return one the <a href="billingclient.html#gpb_error_type">gpb_error_type</a> constants to inform you of the status of the connection attempt.</p>
<p>This function <strong>must be called before calling any other IAP functions</strong> and the return status should be <code>gpb_no_error</code>. This does not, however, mean that the Store is available, only that the connection <em>attempt</em> has been successful. Before you can successfully define, query or purchase any products, you must ensure that the connection is valid.</p>
<p>To check the availability of the Play Store, the function will also trigger one of two callbacks in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_ConnectToStore()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<p>If the initial returned status is <code>gpb_no_error</code>.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td><code>gpb_store_connect</code> or <code>gpb_store_connect_failed</code>, depending on whether a connection could be made to the Play Store.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>In this extended example, we first send an API request to connect to the store in some event. This would normally be done in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Object_Events.htm">Create Event</a> of a dedicated controller object that is one of the first things created in your game:</p>
<pre class="highlight"><code class="language-gml">/// Create Event
var _init = GPBilling_ConnectToStore();
if (_init == gpb_error_unknown)
{
    show_debug_message("ERROR - Billing API Has Not Connected!");
    alarm[0] = game_get_speed(gamespeed_fps) * 10;
}</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the connection request has failed, then we can – for example - call an <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/alarm.htm">alarm[]</a>, where we can call this same code again to test for store connection periodically.</p>
</div>
<p>Assuming the API has correctly requested a store connection, it will trigger an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> where you can check to see if the API has successfully connected to the Google Play Store or not:</p>
<pre class="highlight"><code class="language-gml">if(os_type != os_android) exit;

var _event_id = async_load[? "id"];
switch (_event_id)
{
    // ...

    case gpb_store_connect:
        // At this point we have just finished connecting to the store so we need to:

        // 1) Add the products to the local IAP
        GPBilling_AddProduct(IAP_100gems);
        GPBilling_AddProduct(IAP_noads);
        GPBilling_AddSubscription(IAP_premium);

        // 2) Query purchase data (async)
        GPBilling_QueryPurchasesAsync(gpb_purchase_skutype_inapp);

        // 3) Query products and subscriptions
        // (required to use 'GPBilling_Sku_GetOriginalJson')
        GPBilling_QueryProducts();
        GPBilling_QuerySubscriptions();
        break;

    case gpb_store_connect_failed:
        // Store has failed to connect, so try again periodically
        alarm[0] = game_get_speed(gamespeed_fps) * 10;
        break;

    // ...
}</code></pre>
<p>In the above example, if the store connection fails, you'll see we set an alarm, setting it to count down 10 seconds. In this event we can then try to initialise the store once more using the same code that we have in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Object_Events.htm">Create Event</a>, shown above.</p>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_isstoreconnected">GPBilling_IsStoreConnected</h1>
<p>This function checks if the Google Play Billing API currently has a connection to the Google Play Store. The function will return <code>true</code> if it has and <code>false</code> if it hasn't.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there is no connection, <strong>you should not permit any further Google Play Billing API function calls</strong> and you could also disable or hide any purchase options for the user in your game UI until the connection has been re-established.
In general, you should always call this function and check connectivity before doing any interactions with the Billing API.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_IsStoreConnected()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">/// Left Mouse Released event
if (!GPBilling_IsStoreConnected()) exit;

GPBilling_PurchaseSubscription(product_id);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_getstatus">GPBilling_GetStatus</h1>
<p>This function returns the status of the Google Play Billing extension.</p>
<p>The status can be one of <code>gpb_no_error</code>, <code>gpb_error_not_initialised</code> or <code>gpb_error_no_skus</code>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_GetStatus()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">GPBilling_GetStatus();</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_addproduct">GPBilling_AddProduct</h1>
<p>This function can be used to add a <strong>consumable</strong> product to the internal product list for purchase. You supply the Product ID (as a string, the same as the product ID on the Google Play Console for the game), and the function will return either <code>gpb_error_unknown</code> or <code>gpb_no_error</code>.
For subscription products, you should be using the function <a href="billingclient.html#gpbilling_addsubscription">GPBilling_AddSubscription</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is no difference between a consumable and a non-consumable product as far as the API is concerned. So, for non-consumable IAPs – like a "no ads" IAP, for example – you simply don't call the <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a> function on it. However, non-consumables should still be acknowledged using the <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a> function when purchased.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_AddProduct(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The product ID (SKU) of the IAP product to add.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code is being called from the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> when it has been triggered by the function <a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a>:</p>
<pre class="highlight"><code class="language-gml">var _eventId = async_load[? "id"];
switch (_eventId)
{
    // ...

    case gpb_store_connect:
        GPBilling_AddProduct(IAP_100gems);
        GPBilling_AddProduct(IAP_noads);
        GPBilling_AddSubscription(IAP_premium);

        GPBilling_QueryProducts();
        GPBilling_QuerySubscriptions();
        break;

    // ...
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_addsubscription">GPBilling_AddSubscription</h1>
<p>This function can be used to add a <strong>subscription</strong> product to the internal product list for purchase. You supply the Product ID (as a string, the same as the product ID on the Google Play Console for the game), and the function will return one of the constants listed below.</p>
<p>The function returns either <code>gpb_error_unknown</code> or <code>gpb_no_error</code>.</p>
<p>For consumable products, you should be using the function <a href="billingclient.html#gpbilling_addproduct">GPBilling_AddProduct</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_AddSubscription(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The product ID (SKU) to add.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code is being called from the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> when it has been triggered by the function <a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a>.</p>
<pre class="highlight"><code class="language-gml">var _eventId = async_load[? "id"];
switch (_eventId)
{
    // ...

    case gpb_store_connect:
        GPBilling_AddProduct(IAP_100gems);
        GPBilling_AddProduct(IAP_noads);
        GPBilling_AddSubscription(IAP_premium);

        GPBilling_QueryProducts();
        GPBilling_QuerySubscriptions();
        break;

    // ...
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_queryproducts">GPBilling_QueryProducts</h1>
<p>This function can be used to query the state of any <strong>consumable</strong> products (for subscriptions, please use the function <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a>).</p>
<p>This function will generate an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> where the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map <code>"id"</code> key holds the constant <code>gpb_product_data_response</code>, as well as the key <code>"json_response"</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should NOT call this function at the same time as the equivalent subscription query, as this may cause the Google API to error. Instead, call one function, and then in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> callback, call the other function if you need to.</p>
</div>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_QueryProducts()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The value <code>gpb_product_data_response</code></td>
</tr>
<tr>
<td>json_response</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the response data:<br><br><em> <code>"success"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a>) - Whether the query was successfully processed<br></em> <code>"skuDetails"</code>(<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#sku_details">sku_details</a>) - An array containing the details of every activated IAP product</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code is being called from the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> when it has been triggered by the function <a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a>.</p>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
{
    // ...

    case gpb_store_connect:
        GPBilling_AddProduct(IAP_100gems);
        GPBilling_AddProduct(IAP_noads);
        GPBilling_AddSubscription(IAP_premium);

        GPBilling_QueryProducts();
        GPBilling_QuerySubscriptions();
        break;

    // ...
}</code></pre>
<p>The query products function will then trigger another call to the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>, which can be parsed by adding another case to the switch statement, this time checking the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> key <code>"id"</code> for the constant <code>gpb_product_data_response</code>. Something like this:</p>
<pre class="highlight"><code class="language-gml">case gpb_product_data_response:
    var _json = async_load[? "response_json"];
    var _response_data = json_parse(_json);
    if (_response_data.success)
    {
        var _sku_detail, _arr_sku_details = _response.skuDetails;
        for (var i = 0; i &lt; array_length(_arr_sku_details); ++i)
        {
            _sku_detail = _arr_sku_details[i];
            show_debug_message($"{_sku_detail.title} ({_sku_detail.productId})\n-----\n");
            show_debug_message($"{_sku_detail.description}");
            show_debug_message($"{_sku_detail.price}");
        }
        GPBilling_QuerySubscriptions();
    }
    break;</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After parsing the returned product data, we then call the equivalent query function for subscriptions, and then when that triggers another asynchronous callback we'd call the function <a href="billingclient.html#gpbilling_querypurchasesasync">GPBilling_QueryPurchasesAsync</a> to check for any purchases that haven't been consumed.</p>
</div>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</h1>
<p>This function can be used to query the state of any <strong>subscription</strong> products (for consumables, please use the function <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a>).</p>
<p>This function will generate an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> where the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map <code>"id"</code> key holds the constant <code>gpb_subscription_data_response</code>, as well as the key <code>"json_response"</code>. This key contains a JSON object string that holds an <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#sku_details">sku_details</a> structs.</p>
<p>The DS map for each individual product will contain the following keys:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should NOT call this function at the same time as the equivalent products query, as this may cause the Google API to error. Instead, call one function, and then in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> callback, call the other function if you need to.</p>
</div>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_QuerySubscriptions()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The value <code>gpb_product_data_response</code></td>
</tr>
<tr>
<td>json_response</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the response data:<br><br><em> <code>"success"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a>) - Whether the query was successfully processed<br></em> <code>"skuDetails"</code>(<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#sku_details">sku_details</a>) - An array containing the details of every activated IAP product</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code is being called from the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> when it has been triggered by the function <a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a>.</p>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
    {
    case gpb_store_connect:
        GPBilling_AddSubscription(global.IAP_PurchaseID[0]);
        GPBilling_AddSubscription(global.IAP_PurchaseID[1]);
        GPBilling_QuerySubscriptions();
        break;
    }</code></pre>
<p>The query subscriptions function will then trigger another call to the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>, which can be parsed by adding another case to the switch statement, this time checking the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> key <code>"id"</code> for the constant <code>gpb_subscription_data_response</code>, something like this:</p>
<pre class="highlight"><code class="language-gml">case gpb_subscription_data_response:
    var _json = async_load[? "response_json"];
    var _response_data = json_parse(_json);
    if (_response_data.success)
    {
        var _arr_sku_details = _response.skuDetails;
        for (var i = 0; i &lt; array_length(_arr_sku_details); ++i)
        {
            var _sku_detail = _arr_sku_details[i];
            show_debug_message($"{_sku_detail.title} ({_sku_detail.productId})\n-----\n");
            show_debug_message($"{_sku_detail.description}");
            show_debug_message($"{_sku_detail.price}");
        }
        GPBilling_QueryPurchasesAsync(gpb_purchase_skutype_inapp);
    }
    break;</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After parsing the returned subscription data, we then call the function <a href="billingclient.html#gpbilling_querypurchasesasync">GPBilling_QueryPurchasesAsync</a> to check for any purchases that haven't been consumed. If you haven't already queried consumable products, then you should probably do that first, then in the corresponding <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> callback, you'd check the purchase status.</p>
</div>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchaseproduct">GPBilling_PurchaseProduct</h1>
<p>This function sends a purchase request to the Billing API and attempts to purchase the product with the given ID. The ID value should be a string and is the product identifier name on the Google Play Console, for example <code>"buy_100_gold"</code>. The function will return one of the constants listed below to indicate the initial status of the purchase request, and then an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> will be triggered with the callback.</p>
<p>The function returns one of <code>gpb_error_not_initialised</code>, <code>gpb_error_no_skus</code>, <code>gpb_error_selected_sku_list_empty</code> or <code>gpb_no_error</code>.</p>
<p>The <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> callback will return the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map, which will contain an <code>"id"</code> key with the constant <code>gpb_iap_receipt</code> for a purchase request, as well as the key <code>"response_json"</code>, which will contain a JSON formatted string with the purchase data.</p>
<p>Keep in mind that any NON-consumable purchases will also have the purchased state (1), as the Google Billing API makes no distinction between consumable and non-consumable and it's up to you to decide when and if a purchase is consumed. However, <strong>all purchases must be <em>acknowledged</em> within 2 days of purchase</strong>, even if they are not being consumed. This is done automatically when a consumable is used, however for non-consumables this must be done using the function <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a>. If you do not acknowledge a purchase within 2 days, it will be refunded.</p>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_PurchaseProduct(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The ID of the product as shown on the Google Play Console.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The constant <code>gpb_iap_receipt</code></td>
</tr>
<tr>
<td>response_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the response data:<br><br><em> <code>"success"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a>) - Whether the query was successfully processed<br></em> <code>"purchases"</code>(<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#purchase">purchase</a>) - An array containing the details of every purchase. Only present if <code>"success"</code> is <code>true</code>.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be used in (for example, but not limited to) a mouse pressed event to purchase a product:</p>
<pre class="highlight"><code class="language-gml">/// Mouse Left Pressed Event
if (!GPBilling_IsStoreConnected()) exit;

GPBilling_PurchaseProduct(product_id);</code></pre>
<p>You would then have something like the following code in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> to deal with the purchase callback.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following code shows a simple purchase verification scheme, however you should ideally verify the purchase with an HTTP call to your server, supplying the returned token string, and then consume the purchase when you receive verification in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/HTTP.htm">Http Async Event</a>.</p>
</div>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
{
    case gpb_iap_receipt:
        var _json = async_load[? "response_json"];
        var _response_data = json_parse(_json);
        if (_response_data.success)
        {
            var _purchases = _response_data.purchases;
            for (var i = 0; i &lt; array_length(_purchases); ++i)
            {
                var _purchase = _purchases[i];
                var _ptoken = _purchase.purchaseToken;
                var _sig = GPBilling_Purchase_GetSignature(_ptoken);
                var _pjson = GPBilling_Purchase_GetOriginalJson(_ptoken);
                if (GPBilling_Purchase_VerifySignature(_pjson, _sig))
                {
                    GPBilling_ConsumeProduct(_ptoken);
                    array_push(global.CurrentTokens, _ptoken);
                    array_push(global.CurrentProducts, _purchase.productId);
                }
            }
        }
        break;

    // ...
}</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We store the purchase tokens and product IDs of those products we consume or acknowledge in global arrays. This is done so that we can track the purchases correctly when the consumed or acknowledged response comes back (see the functions <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a> and <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a> for more details).</p>
</div>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchasesubscription">GPBilling_PurchaseSubscription</h1>
<p>This function will send a subscription purchase request to the Billing API and attempt to subscribe to the product with the given ID. The ID value should be a string and is the subscription identifier name on the Google Play Console, for example <code>"improved_version"</code>. The function will return one of the constants listed below to indicate the initial status of the subscription request, and then an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> will be triggered with the callback.</p>
<p>The function returns one of <code>gpb_error_not_initialised</code>, <code>gpb_error_no_skus</code>, <code>gpb_error_selected_sku_list_empty</code> or <code>gpb_no_error</code>.</p>
<p>The <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> callback will return the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map, which will contain an <code>"id"</code> key with the constant <code>gpb_iap_receipt</code> for a purchase request, as well as the key <code>"response_json"</code>, which will contain a JSON formatted string with the purchase data.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Keep in mind that <strong>all subscription purchases must be <em>acknowledged</em> within 2 days of purchase</strong>, using the function <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a>. If you do not acknowledge a purchase within 2 days, it will be refunded. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After the initial purchase, the subscription will be renewed automatically by Google, and all you have to do is query the subscription state each time the game starts to unlock or block any additional content as required.</p>
</div>
<blockquote>
<p><strong><img alt="⚠️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/26a0.png" title=":warning:" /> IMPORTANT</strong> Setting up and using subscriptions requires an external server to be able to communicate with your app and with the Google Play servers for verification and other purposes. This is outside of the scope of this documentation and instead we refer you to the following documents:
* <a href="https://developer.android.com/google/play/billing/billing_subscriptions">Google Developer Docs: Add Subscription-Specific Features</a>
* <a href="https://developer.android.com/google/play/billing/billing_library_overview#Verify-purchase">Google Developer Docs: Verify A Purchase On A Server</a></p>
</blockquote>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_PurchaseSubscription(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The ID of the product as shown on the Google Play Console.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The constant <code>gpb_iap_receipt</code></td>
</tr>
<tr>
<td>response_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the response data:<br><br><em> <code>"success"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a>) - Whether the query was successfully processed<br></em> <code>"purchases"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#purchase">purchase</a>) - An array containing the details of every purchase. Only present if <code>"success"</code> is <code>true</code>.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be used in (for example, but not limited to) a mouse pressed event to purchase a product:</p>
<pre class="highlight"><code class="language-gml">/// Mouse Left Pressed Event
if (!GPBilling_IsStoreConnected()) exit;

GPBilling_PurchaseSubscription(product_id);</code></pre>
<p>You would then have something like the following code in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> to deal with the purchase callback.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following code shows a simple purchase verification scheme, however you should ideally verify the purchase with an HTTP call to your server, supplying the returned token string, and then consume the purchase only when you receive verification in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/HTTP.htm">Http Async Event</a>.</p>
</div>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
{
    case gpb_iap_receipt:
        var _json = async_load[? "response_json"];
        var _response_data = json_parse(_json);
        if (_response_data.success)
        {
            var _purchases = _response_data.purchases;
            for (var i = 0; i &lt; array_length(_purchases);  ++i)
            {
                var _purchase = _purchases[i];
                var _ptoken = _purchase.purchaseToken;
                var _sig = GPBilling_Purchase_GetSignature(_ptoken);
                array_push(global.CurrentTokens, _ptoken);
                array_push(global.CurrentProduct, _purchase.productId);

                // SERVER VERIFICATION CODE HERE
                // Here you would send the token and signature to
                // your servers for verification with the Google
                // Play API and then return the result, which would
                // then be received in an Asynchronous HTTP event.
                // Once received, the subscription can then
                // be acknowledged, and content, bonuses, etc.
                // can be unlocked in your game.
            }
        }
        break;
}</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We store the purchase tokens and product IDs of those products we consume or acknowledge in global arrays. This is done so that we can track the purchases correctly when the consumed or acknowledged response comes back (see the functions <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a> and <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a> for more details).</p>
</div>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</h1>
<p>This function acknowledges a purchase or subscription.</p>
<p>The function returns either <code>gpb_no_error</code> or <code>gpb_error_unknown</code>.</p>
<p>When you receive a notification that a purchase has been made, it needs to be acknowledged with the Google servers within 2 days, otherwise it is refunded. This is done automatically for consumable purchases when you call the function <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a>, but for non-consumable and subscriptions, you must call this function to let Google know the purchase has been received correctly.</p>
<p>On calling the function initially, it will return one of the constants listed below to inform you of the request status, and if this is <code>gpb_no_error</code> then an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> will be triggered where the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map will have the key <code>"id"</code> which will correspond to the extension constant <code>gpb_acknowledge_purchase_response</code>. Additionally, the map will have the key <code>"response_json"</code> which will be a JSON string that can be converted into a <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Structs.htm">Struct</a> using the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_parse.htm">json_parse</a> function.</p>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_AcknowledgePurchase(purchase_token)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>purchase_token</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique string token for the purchase being acknowledged.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The constant <code>gpb_acknowledge_purchase_response</code>.</td>
</tr>
<tr>
<td>response_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the details of the acknowledgement.<br><br><em> <code>"responseCode"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a>) - This can be checked before proceeding to deal with the acknowledgement response. It can have one of the following integer values:<br>  * -3 - The request has reached the maximum timeout before Google Play responds.<br>  * -2 – Requested feature is not supported by Play Store on the current device.<br>  * -1 – The Play Store service is not connected currently.<br>  *  0 – Success<br>  *  1 – User has cancelled the action<br>  *  2 – Network connection is down<br>  *  4 – Requested product is not available for purchase<br>  *  6 – Fatal error during the API action<br>  *  7 – Failure to purchase since item is already owned<br>  *  8 – Failure to consume since item is not owned<br><br></em> <code>"purchaseToken"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a>) - A reference to the purchase token.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>This example shows how you'd deal with the callback in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> for an acknowledged product (for an example of when the <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a> function should be called, see the Example for the function <a href="billingclient.html#gpbilling_purchasesubscription">GPBilling_PurchaseSubscription</a>):</p>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
{
    case gpb_acknowledge_purchase_response:
        var _response_data = json_parse(async_load[? "response_json"]);
        var _num = -1;
        if (_response_data.responseCode == 0)
        {
            var _sz = array_length(global.CurrentProducts);
            for (var i = 0; i &lt; _sz; ++i)
            {
                if (global.CurrentProducts[i] == "yoyo_noads")
                {
                    global.NoAds = true;
                    _num = i;
                    break;
                }
                // Add further checks for other products here...
            }
            if (_num &gt; -1)
            {
                array_delete(global.CurrentProducts, _num, 1);
                array_delete(global.CurrentTokens, _num, 1);
            }
        }
        else
        {
            // Parse the other response codes here
            // and react appropriately
        }
        break;
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_consumeproduct">GPBilling_ConsumeProduct</h1>
<p>This function will consume a purchase. When you receive a notification that a purchase has been made, it needs to be consumed or acknowledged with the Google servers within 2 days, otherwise it is refunded. Consumable purchases are acknowledged automatically when you call this function, but for non-consumable and subscription purchases, see the function <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a>.</p>
<p>The function either returns <code>gpb_no_error</code> or <code>gpb_error_unknown</code>.</p>
<p>On calling the function initially, it will return one of the constants listed below to inform you of the request status, and if this is <code>gpb_no_error</code> then an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> will be triggered where the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map will have the key <code>"id"</code> which will correspond to the extension constant <code>gpb_product_consume_response</code>. Additionally, the map will have the key <code>"response_json"</code> which will be a JSON string that can be converted into a <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Structs.htm">Struct</a> using the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_parse.htm">json_parse</a> function.</p>
<p>If you have the <code>"responseCode"</code> key, then it can be checked for one of the following integer values:</p>
<ul>
<li>-3 – The request has reached the maximum timeout before Google Play responds.</li>
<li>-2 – Requested feature is not supported by Play Store on the current device.</li>
<li>-1 – The Play Store service is not connected currently.</li>
<li>0 – Success</li>
<li>1 – User has cancelled the action</li>
<li>2 – Network connection is down</li>
<li>4 – Requested product is not available for purchase</li>
<li>6 – Fatal error during the API action</li>
<li>7 – Failure to purchase since item is already owned</li>
<li>8 – Failure to consume since item is not owned</li>
</ul>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_ConsumeProduct(purchase_token)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>purchase_token</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique string token for the purchase being acknowledged.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_error_type">gpb_error_type</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The constant <code>gpb_product_consume_response</code>.</td>
</tr>
<tr>
<td>response_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the following:<br><br><em> <code>responseCode</code> - One of the following values:<br><br>  * -3 – The request has reached the maximum timeout before Google Play responds.<br>  * -2 – Requested feature is not supported by Play Store on the current device.<br>  * -1 – The Play Store service is not connected currently.<br>  *  0 – Success<br>  *  1 – User has cancelled the action<br>  *  2 – Network connection is down<br>  *  4 – Requested product is not available for purchase<br>  *  6 – Fatal error during the API action<br>  *  7 – Failure to purchase since item is already owned<br>  *  8 – Failure to consume since item is not owned<br><br></em> <code>purchaseToken</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a>) - The purchase token string of the consumed product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>This example shows how you'd deal with the callback in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> for a consumed product (for an example of when the <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a> function should be called, see the Example for the function <a href="billingclient.html#gpbilling_purchaseproduct">GPBilling_PurchaseProduct</a>):</p>
<pre class="highlight"><code class="language-gml">var _eventId = async_load[? "id"];
switch (_eventId)
{
    // ...

    case gpb_product_consume_response:
        var _response_data = json_parse(async_load[? "response_json"]);
        var _num = -1;
        if (struct_exists(_response_data, "purchaseToken"))
        {
            for (var i = 0; i &lt; array_length(global.CurrentTokens); ++i)
            {
                if (_response_data.purchaseToken == global.CurrentTokens[i])
                {
                    if (global.CurrentProducts[i] == "yoyo_500gold")
                    {
                        global.Gold += 500;
                        _num = i;
                        break;
                    }
                    // Check any other products here...
                }
            }
            if (_num &gt; -1)
            {
                array_delete(global.CurrentProducts, _num, 1);
                array_delete(global.CurrentTokens, _num, 1);
            }
        }
        else
        {
            // Parse the error response codes here
            // and react appropriately
        }
        break;

    // ...
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getdescription">GPBilling_Sku_GetDescription</h1>
<p>This function will return the descriptive text as defined on the Google Play Developer Console for the given SKU (product ID) You supply the product ID as a string, and the function will return a string with the description.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetDescription(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getfreetrialperiod">GPBilling_Sku_GetFreeTrialPeriod</h1>
<p>This function will return the Trial Period as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a string in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format, for example <code>"P7D"</code> which would equate to seven days.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only valid for subscriptions which have a trial period configured.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetFreeTrialPeriod(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _period = GPBilling_Sku_GetFreeTrialPeriod(global.IAP_PurchaseID[0]);
var _days = string_digits(_period);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, "Trial Period: " + _days + " days");</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_geticonurl">GPBilling_Sku_GetIconUrl</h1>
<p>This function returns the URL for the icon of the given SKU (product ID) as created on the Google Play Developer Console. You supply the product ID as a string, and the function will return a string with the URL. You can then use the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add.htm">sprite_add</a> function to retrieve this image (which will trigger an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded Event</a> and then display it in your game).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetIconUrl(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>In this example, we first call the function to get the URL of the icon for a product (probably in an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>, after querying the product details):</p>
<pre class="highlight"><code class="language-gml">var _url = GPBilling_Sku_GetIconUrl(global.IAP_PurchaseID[0]);
iap_sprite = sprite_add(_url, 0, false, false, 0, 0);</code></pre>
<p>This will trigger an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded Event</a> where you can then store the returned image for drawing:</p>
<pre class="highlight"><code class="language-gml">if (ds_map_find_value(async_load, "id") == iap_sprite)
{
    if (ds_map_find_value(async_load, "status") &gt;= 0)
    {
        sprite_index = iap_sprite;
    }
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getintroductoryprice">GPBilling_Sku_GetIntroductoryPrice</h1>
<p>This function will return the introductory price as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a formatted string with the price that includes the currency sign, for example <code>"€3.99"</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only valid for subscriptions which have an introductory period configured.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetIntroductoryPrice(sku)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sku</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetIntroductoryPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getintroductorypriceamountmicros">GPBilling_Sku_GetIntroductoryPriceAmountMicros</h1>
<p>This function will return the introductory price as defined on the Google Play Developer Console for the given SKU (product ID) in <em>micros</em>, where 1,000,000 micros equals one unit of the currency. You supply the product ID as a string, and the function will return an integer value for the price in micros, for example 7990000 (which would be 7.99 in currency).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only valid for subscriptions which have an introductory period configured.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetIntroductoryPriceAmountMicros(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _m = GPBilling_Sku_GetIntroductoryPriceAmountMicros(global.IAP_PurchaseID[0]);
var _c = GPBilling_Sku_GetPriceCurrencyCode(global.IAP_PurchaseID[0]);
var _val = string(_m / 1000000);
var _symbol = "";
switch (_c)
{
    case "GBP": _symbol = "£"; break;
    case "JPY": _symbol = "¥"; break;
    case "EUR": _symbol = "€"; break;
}
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _symbol + _val);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getintroductorypricecycles">GPBilling_Sku_GetIntroductoryPriceCycles</h1>
<p>This function will return the introductory price cycles as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a string of the value for the number of billing cycles that the user will pay the introductory price for, for example <code>"3"</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only valid for subscriptions which have an introductory period configured.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetIntroductoryPriceCycles(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetIntroductoryPrice(global.IAP_PurchaseID[0]);
var _cycles = GPBilling_Sku_GetIntroductoryPriceCycles(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);
draw_text(x, y + 80, "for " + _cycles + " months");</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getintroductorypriceperiod">GPBilling_Sku_GetIntroductoryPricePeriod</h1>
<p>This function will return the introductory price period as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a string in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format, for example <code>"P7D"</code> would equate to seven days.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only valid for subscriptions which have an introductory period configured.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetIntroductoryPricePeriod(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _period = GPBilling_Sku_GetIntroductoryPricePeriod(global.IAP_PurchaseID[0]);
var _days = string_digits(_period);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, "Offer Lasts For " + _days + " days!");</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getoriginaljson">GPBilling_Sku_GetOriginalJson</h1>
<p>This function will return the original JSON corresponding to the given SKU (product ID), containing all the details about the product. You supply the product ID as a string, and the function will return a JSON string that can be decoded into a <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Structs.htm">Struct</a> using the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_parse.htm">json_parse</a> function. The struct's contents will correspond to the details listed in the Google Billing documentation (see the Android developer documentation on <a href="https://developer.android.com/reference/com/android/billingclient/api/SkuDetails.html">SkuDetails</a> for more information).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetOriginalJson(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code can be called after querying a product to retrieve all the information about it without calling the individual SKU functions:</p>
<pre class="highlight"><code class="language-gml">var _json = GPBilling_Sku_GetOriginalJson(global.IAP_PurchaseID[0]);
var _data = json_parse(_json);
global.IAP_PurchaseData[0, 0] = _data.price;
global.IAP_PurchaseData[0, 1] = _data.title;
global.IAP_PurchaseData[0, 2] = _data.description;</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getoriginalprice">GPBilling_Sku_GetOriginalPrice</h1>
<p>This function will return the original price as defined on the Google Play Developer Console for the given SKU (product ID), where the original price is the price of the item before any applicable sales have been applied. You supply the product ID as a string, and the function will return a formatted string with the price that includes the currency sign, for example <code>"€3.99"</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetOriginalPrice(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetOriginalPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getoriginalpriceamountmicros">GPBilling_Sku_GetOriginalPriceAmountMicros</h1>
<p>This function will return the original price as defined on the Google Play Developer Console for the given SKU (product ID) in micros, where 1,000,000 micros equals one unit of the currency. The original price is defined as the price of the item before any applicable sales have been applied, and the value represents the localised, rounded price for a particular currency. You supply the product ID as a string, and the function will return an integer value for the price in micros, for example 7990000 (which would be 7.99 in currency).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetOriginalPriceAmountMicros(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _m = GPBilling_Sku_GetOriginalPriceAmountMicros(global.IAP_PurchaseID[0]);
var _c = GPBilling_Sku_GetPriceCurrencyCode(global.IAP_PurchaseID[0]);
var _val = string(_m / 1000000);
var _symbol = "";
switch (_c)
{
    case "GBP": _symbol = "£"; break;
    case "JPY": _symbol = "¥"; break;
    case "EUR": _symbol = "€"; break;
}
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _symbol + _val);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getprice">GPBilling_Sku_GetPrice</h1>
<p>This function will return the current price as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a formatted string with the price that includes the currency sign, for example <code>"€3.99"</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetPrice(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getpriceamountmicros">GPBilling_Sku_GetPriceAmountMicros</h1>
<p>This function will return the current price as defined on the Google Play Developer Console for the given SKU (product ID) in micros, where 1,000,000 micros equals one unit of the currency, and the value represents the localized, rounded price for a particular currency. You supply the product ID as a string, and the function will return an integer value for the price in micros, for example 7990000 (which would be 7.99 in currency).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetPriceAmountMicros(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _m = GPBilling_Sku_GetPriceAmountMicros(global.IAP_PurchaseID[0]);
var _c = GPBilling_Sku_GetPriceCurrencyCode(global.IAP_PurchaseID[0]);
var _val = string(_m / 1000000);
var _symbol = "";
switch (_c)
{
    case "GBP": _symbol = "£"; break;
    case "JPY": _symbol = "¥"; break;
    case "EUR": _symbol = "€"; break;
}
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _symbol + _val);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getpricecurrencycode">GPBilling_Sku_GetPriceCurrencyCode</h1>
<p>This function will return the currency code for the given SKU (product ID). You supply the product ID as a string, and the function will return a string in <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a> format, for example <code>"EUR"</code> would equate to the Euro currency.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetPriceCurrencyCode(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _m = GPBilling_Sku_GetPriceAmountMicros(global.IAP_PurchaseID[0]);
var _c = GPBilling_Sku_GetPriceCurrencyCode(global.IAP_PurchaseID[0]);
var _val = string(_m / 1000000);
var _symbol = "";
switch (_c)
{
    case "GBP": _symbol = "£"; break;
    case "JPY": _symbol = "¥"; break;
    case "EUR": _symbol = "€"; break;
}
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _symbol + _val);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_getsubscriptionperiod">GPBilling_Sku_GetSubscriptionPeriod</h1>
<p>This function will return the subscription renewal period as defined on the Google Play Developer Console for the given SKU (product ID). You supply the product ID as a string, and the function will return a string in <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format, for example <code>"P7D"</code> would equate to seven days.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is only valid for subscription IAPs.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetSubscriptionPeriod(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _period = GPBilling_Sku_GetSubscriptionPeriod(global.IAP_PurchaseID[0]);
var _days = string_digits(_period);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, "Renewal Period: " + _days + " days");</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_gettitle">GPBilling_Sku_GetTitle</h1>
<p>This function will return the title of a given SKU (product ID) as defined on the Google Play Developer Console. You supply the product ID as a string, and the function will return a string with the product title.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetTitle(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_sku_gettype">GPBilling_Sku_GetType</h1>
<p>This function will return the in-app purchase type of a given SKU (product ID) as defined on the Google Play Developer Console. You supply the product ID as a string, and the function will return a constant with the IAP product type.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function requires you to have called <a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a> or <a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a> <em>first</em>, but once those have returned their respective Async callbacks, this function can be used anywhere in your game code to retrieve the required information.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Sku_GetType(product_id)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique SKU (product ID) of the product.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_purchase_skutype">gpb_purchase_skutype</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<p>The following code would be called in the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Draw_Events.htm">Draw Event</a> of an object used to display the information for a given IAP product:</p>
<pre class="highlight"><code class="language-gml">var _name = GPBilling_Sku_GetTitle(global.IAP_PurchaseID[0]);
var _desc = GPBilling_Sku_GetDescription(global.IAP_PurchaseID[0]);
var _price = GPBilling_Sku_GetPrice(global.IAP_PurchaseID[0]);
draw_set_halign(fa_center);
draw_text(x, y + 32, _name);
draw_text(x, y + 48, _desc);
draw_text(x, y + 64, _price);
if (GPBilling_Sku_GetType(global.IAP_PurchaseID[0]) == gpb_purchase_skutype_subs)
{
    draw_text(x, y + 80, "Subscription!");
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchase_getstate">GPBilling_Purchase_GetState</h1>
<p><strong>Google Play Billing Function:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/Purchase#getPurchaseState()">Purchase.getPurchaseState</a></p>
<p>This function can be used to check the current state of a product purchase. You supply the unique purchase token (as a string), and the function will return one of the <a href="billingclient.html#gpb_purchase_state">gpb_purchase_state</a> constants to indicate the current state of the purchase.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Purchase_GetState(purchase_token)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>purchase_token</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The purchase token for the purchase to check.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="billingclient.html#gpb_purchase_state">gpb_purchase_state</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">if (GPBilling_Purchase_GetState(global.CurrentToken) == gpb_purchase_state_purchased)
{
    sprite_index = spr_IconConsume;
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchase_getsignature">GPBilling_Purchase_GetSignature</h1>
<p><strong>Google Play Billing Function:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/Purchase#getSignature()">Purchase.getSignature</a></p>
<p>This function will return a string containing the signature of the purchase data that was signed with the private key of the developer. If the function fails, then an empty string <code>""</code> will be returned.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Purchase_GetSignature(purchase_token)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>purchase_token</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The purchase token for the purchase to check.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">for (var i = 0; i &lt; array_length(global.CurrentTokens); ++i)
{
    var _sig = GPBilling_Purchase_GetSignature(global.CurrentTokens[i]);
    var _json = GPBilling_Purchase_GetOriginalJson(global.CurrentTokens[i]);
    if (GPBilling_Purchase_VerifySignature(_json, _sig))
    {
        GPBilling_ConsumeProduct(global.CurrentTokens[i]);
    }
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchase_verifysignature">GPBilling_Purchase_VerifySignature</h1>
<p>This function can be used to verify a purchase before consuming or acknowledging it. You supply a JSON string plus the unique signature for a purchase. You can retrieve these details using the <a href="billingclient.html#gpbilling_purchase_getsignature">GPBilling_Purchase_GetSignature</a> and <a href="billingclient.html#gpbilling_purchase_getoriginaljson">GPBilling_Purchase_GetOriginalJson</a> functions, and the function will return <code>true</code> if the purchase can be verified, or <code>false</code> otherwise.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This form of verification <strong>isn't truly secure</strong> because it requires you to bundle purchase verification logic within your app. This logic becomes compromised if your app is reverse engineered. Instead we recommend that you create your own server to verify any product purchases.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Purchase_VerifySignature(original_json, signature)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>original_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The original JSON related to the purchase being verified</td>
</tr>
<tr>
<td>signature</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The unique signature used to verify the purchase</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">for (var i = 0; i &lt; array_length(global.CurrentTokens); ++i)
{
    var _sig = GPBilling_Purchase_GetSignature(global.CurrentTokens[i]);
    var _json = GPBilling_Purchase_GetOriginalJson(global.CurrentTokens[i]);
    if (GPBilling_Purchase_VerifySignature(_json, _sig))
    {
        GPBilling_ConsumeProduct(global.CurrentTokens[i]);
    }
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_purchase_getoriginaljson">GPBilling_Purchase_GetOriginalJson</h1>
<p><strong>Google Play Billing Function:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/Purchase#getOriginalJson()">Purchase.getOriginalJson(</a></p>
<p>This function will return the original JSON string related to a purchase. You supply the unique purchase token (a string) and the function will return a JSON object string that can be decoded into a <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Structs.htm">Struct</a> using the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_parse.htm">json_parse</a> function. This struct will contain all the details about the given purchase. If the function fails, then an empty string <code>""</code> will be returned.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_Purchase_GetOriginalJson(purchaseToken)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>purchaseToken</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The purchase token for the purchase to check.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></p>
</blockquote>
<p><br></p>
<p><strong>Example:</strong></p>
<pre class="highlight"><code class="language-gml">for (var i = 0; i &lt; array_length(global.CurrentTokens); ++i)
{
    var _sig = GPBilling_Purchase_GetSignature(global.CurrentTokens[i]);
    var _json = GPBilling_Purchase_GetOriginalJson(global.CurrentTokens[i]);
    if (GPBilling_Purchase_VerifySignature(_json, _sig))
    {
        GPBilling_ConsumeProduct(global.CurrentTokens[i]);
    }
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpbilling_querypurchasesasync">GPBilling_QueryPurchasesAsync</h1>
<p><strong>Google Play Billing Function:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/BillingClient#queryPurchasesAsync(com.android.billingclient.api.QueryPurchasesParams,com.android.billingclient.api.PurchasesResponseListener)">queryPurchasesAsync</a></p>
<p>This function replaces <code>GPBilling_QueryPurchases</code> and works in an asynchronous manner. It is used for querying the purchase state of the different products available for your game. This function should always be called before permitting any in-app purchases, preferably near the startup of the game itself. The function takes a <a href="billingclient.html#gpb_purchase_skutype">gpb_purchase_skutype</a> as the <code>"type"</code> argument.</p>
<p>This function will generate an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> where the <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map <code>"id"</code> key holds the constant <code>gpb_query_purchase_async</code>, a <code>"sku_type"</code> key that contains the argument provided during the function call, as well as the key <code>"response_json"</code>. This key contains a JSON object string, which – when decoded using <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/File_Handling/Encoding_And_Hashing/json_parse.htm">json_parse</a> – will be a <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Structs.htm">Struct</a>. This struct will have the key <code>"success"</code> - which will be <code>true</code> if the query has been successfully processed, and <code>false</code> otherwise – as well as the key <code>"purchases"</code> (only if <code>"success"</code> is true).</p>
<ul>
<li>
<p><code>"success"</code> – This will be either <code>true</code> or <code>false</code> depending on whether the purchase query succeeded or not.</p>
</li>
<li>
<p><code>"purchases"</code> – This is a JSON array, where each entry corresponds to an object for an individual purchase. This will be an additional key if "success" is <code>true</code>.</p>
</li>
</ul>
<p>When the <code>"purchases"</code> key exists, this can then be looped through (as shown in the extended example below) to get the individual structs with the product and purchase information.</p>
<p>Purchases that have been made but not consumed will have a <code>"purchaseState"</code> of 1 for purchased, while purchases that are in progress but not yet resolved will have a state of 2 for pending.</p>
<p>Keep in mind that any NON-consumable purchases will also have the purchased state (1), as the Google Billing API makes no distinction between consumable and non-consumable and it's up to you to decide when and if a purchase is consumed. However, <strong>all purchases must be <em>acknowledged</em> within 2 days of purchase, even if they are not being consumed</strong>. This is done automatically when a consumable is used, however for non-consumables this must be done using the function <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a>. If you do not acknowledge a purchase within 2 days, it will be refunded.</p>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">GPBilling_QueryPurchasesAsync(skuType)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>skuType</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The type of product to be queried.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td><a href="billingclient.html#gpb_event_type">gpb_event_type</a></td>
<td>The constant <code>gpb_query_purchase_async</code></td>
</tr>
<tr>
<td>sku_type</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The constant <code>gpb_query_purchase_async</code></td>
</tr>
<tr>
<td>response_json</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A JSON encoded string containing the response data. The response contains the following:<br><br><em> <code>"success"</code> (<a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a>) - Whether the query has been successfully processed.<br></em> <code>"purchases"</code> - An <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Arrays.htm">Array</a> of <a href="billingclient.html#purchase">purchase</a> structs.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p>For this example, we would first want to connect to the store, then add products and then query the product status, before checking the purchase state of each product. So, for example, we'd have a <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Object_Events.htm">Create Event</a> like this:</p>
<pre class="highlight"><code class="language-gml">var _init = GPBilling_ConnectToStore();
if (_init == gpb_error_unknown)
{
    show_debug_message("ERROR - Billing API Has Not Connected!");
    alarm[0] = game_get_speed(gamespeed_fps) * 10;
}</code></pre>
<p>Assuming the API has correctly requested a store connection, it will trigger an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a> where you can check to see if the API has successfully connected to the Google Play Store or not, and then add each of the products that you want to be available to the user, and then query the product details:</p>
<pre class="highlight"><code class="language-gml">var _event_id = async_load[? "id"];
switch (_event_id)
{
    case gpb_store_connect:
        GooglePlayBilling_AddProduct(global.IAP_PurchaseID[0]);
        GooglePlayBilling_AddProduct(global.IAP_PurchaseID[1]);
        GPBilling_QueryProducts();
        break;
}</code></pre>
<p>The query products function will then trigger another <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/IAP.htm">In-App Purchase Async Event</a>, and we can add another case to our switch statement where we can check the state of any purchases from those that we've added, and consume or acknowledge any purchased product as required:</p>
<pre class="highlight"><code class="language-gml">case gpb_product_data_response:
    var _response_data = json_parse(async_load[? "response_json"]);
    if (_response_data.success)
    {
        GPBilling_QueryPurchasesAsync();
    }
    break;
case gpb_query_purchase_async:
    var _response_data = json_parse(async_load[? "response_json"]);
    if (_response_data.success)
    {
        var _purchases = _response_data.purchases;
        for (var i = 0; i &lt; array_length(_purchases); ++i)
        {
            var _purchase = _purchases[i];
            if (_purchase.purchaseState == 1)
            {
                var _pid = _purchase.productId;
                var _token = _purchase.purchaseToken;
                var _add = false;
                if (_pid == global.IAP_PurchaseID[0])
                {
                    GPBilling_ConsumeProduct(_token);
                    _add = true;
                }
                else if (_pid == global.IAP_PurchaseID[1])
                {
                    if (_purchase.acknowledged == 0)
                    {
                        GPBilling_AcknowledgePurchase(_token);
                        _add = true;
                    }
                }
                if (_add)
                {
                    array_push(global.CurrentTokens, _token);
                    array_push(global.CurrentProduct, _pid);
                }
            }
        }
    }
    break;</code></pre>
<p>We store the purchase tokens and product IDs of those products we consume or acknowledge in global arrays. This is done so that we can track the purchases correctly when the consumed or acknowledged response comes back (see the functions <a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a> and <a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a> for more details).</p>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpb_event_type">gpb_event_type</h1>
<p>This group of constants represents the possible event types.</p>
<p>These constants are referenced by the following functions:</p>
<ul>
<li><a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a></li>
<li><a href="billingclient.html#gpbilling_queryproducts">GPBilling_QueryProducts</a></li>
<li><a href="billingclient.html#gpbilling_querysubscriptions">GPBilling_QuerySubscriptions</a></li>
<li><a href="billingclient.html#gpbilling_purchaseproduct">GPBilling_PurchaseProduct</a></li>
<li><a href="billingclient.html#gpbilling_purchasesubscription">GPBilling_PurchaseSubscription</a></li>
<li><a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a></li>
<li><a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a></li>
<li><a href="billingclient.html#gpbilling_querypurchasesasync">GPBilling_QueryPurchasesAsync</a></li>
</ul>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpb_iap_receipt</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains data on a purchase request</td>
</tr>
<tr>
<td><code>gpb_purchase_status</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains data on a purchase status</td>
</tr>
<tr>
<td><code>gpb_product_data_response</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains a product data response</td>
</tr>
<tr>
<td><code>gpb_store_connect</code></td>
<td>The API has connected to the Google Play Store.</td>
</tr>
<tr>
<td><code>gpb_store_connect_failed</code></td>
<td>The API has failed to connect to the Google Play Store.</td>
</tr>
<tr>
<td><code>gpb_product_consume_response</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains a consume response</td>
</tr>
<tr>
<td><code>gpb_acknowledge_purchase_response</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains a purchase response</td>
</tr>
<tr>
<td><code>gpb_subscription_data_response</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains a subscriptions query response</td>
</tr>
<tr>
<td><code>gpb_query_purchase_async</code></td>
<td>The <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a> DS map contains an async purchase query response</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpb_error_type">gpb_error_type</h1>
<p>This set of constants represents the possible error types.</p>
<p>These constants are referenced by the following functions:</p>
<ul>
<li><a href="billingclient.html#gpbilling_connecttostore">GPBilling_ConnectToStore</a></li>
<li><a href="billingclient.html#gpbilling_getstatus">GPBilling_GetStatus</a></li>
<li><a href="billingclient.html#gpbilling_addproduct">GPBilling_AddProduct</a></li>
<li><a href="billingclient.html#gpbilling_purchaseproduct">GPBilling_PurchaseProduct</a></li>
<li><a href="billingclient.html#gpbilling_purchasesubscription">GPBilling_PurchaseSubscription</a></li>
<li><a href="billingclient.html#gpbilling_acknowledgepurchase">GPBilling_AcknowledgePurchase</a></li>
<li><a href="billingclient.html#gpbilling_consumeproduct">GPBilling_ConsumeProduct</a></li>
</ul>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpb_error_unknown</code></td>
<td>An unknown error occurred</td>
</tr>
<tr>
<td><code>gpb_no_error</code></td>
<td>The Billing API has been initialised correctly.</td>
</tr>
<tr>
<td><code>gpb_error_not_initialised</code></td>
<td>The Billing API has not been initialised before calling this function.</td>
</tr>
<tr>
<td><code>gpb_error_no_skus</code></td>
<td>There are no SKUs in the product list or subscription list.</td>
</tr>
<tr>
<td><code>gpb_error_selected_sku_list_empty</code></td>
<td>You have tried to purchase a subscription when there is no subscription in the list (although there may be products in the list)</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpb_purchase_state">gpb_purchase_state</h1>
<p><strong>Google Play Billing Constant:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/Purchase.PurchaseState">Purchase.PurchaseState</a></p>
<p>This set of constants represents the possible states of a purchase.</p>
<p>These constants are referenced by the following functions:</p>
<ul>
<li><a href="billingclient.html#gpbilling_purchase_getstate">GPBilling_Purchase_GetState</a></li>
</ul>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpb_purchase_state_pending</code></td>
<td>The purchase is pending</td>
</tr>
<tr>
<td><code>gpb_purchase_state_purchased</code></td>
<td>The purchase is purchased</td>
</tr>
<tr>
<td><code>gpb_purchase_state_unspecified</code></td>
<td>The purchase state is unspecified</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="gpb_purchase_skutype">gpb_purchase_skutype</h1>
<p><strong>Google Play Billing Constant:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/BillingClient.ProductType">BillingClient.ProductType</a></p>
<p>This set of constants represents the possible SKU Types.</p>
<p>These constants are referenced by the following functions:</p>
<ul>
<li><a href="billingclient.html#gpbilling_sku_gettype">GPBilling_Sku_GetType</a></li>
</ul>
<p>These constants are referenced by the following structs:</p>
<ul>
<li><a href="billingclient.html#sku_details">sku_details</a></li>
</ul>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gpb_purchase_skutype_inapp</code></td>
<td>This constant indicates that the product is a consumable purchase.</td>
</tr>
<tr>
<td><code>gpb_purchase_skutype_subs</code></td>
<td>This constant indicates that the product is a subscription purchase.</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="sku_details">sku_details</h1>
<p>This struct contains details on a single SKU item.</p>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>skuDetailsToken</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>This is a unique token created by Google for the details request.</td>
</tr>
<tr>
<td>productId</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The product ID (SKU, a string) as listed on the Google Play Console for the game.</td>
</tr>
<tr>
<td>type</td>
<td><a href="billingclient.html#gpb_purchase_skutype">gpb_purchase_skutype</a></td>
<td>The SKU type of the product, either <code>gpb_purchase_skutype_inapp</code> or<code>gpb_purchase_skutype_subs</code>.</td>
</tr>
<tr>
<td>price</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The <em>formatted</em> price of the item, including its currency sign. The price does not include tax.</td>
</tr>
<tr>
<td>price_amount_micros</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The price in <em>micro-units</em> (an integer), where 1,000,000 micro-units equals one unit of the currency. For example, if the price is <code>"€7.99"</code>, then the price in micros is <code>7990000</code>. This value represents the localised and rounded price for a particular currency.</td>
</tr>
<tr>
<td>price_currency_code</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The <a href="https://www.xe.com/iso4217.php">ISO 4217</a> currency code for the price and original price, as an integer. For example, if the price is specified in British pounds sterling, then the code returned would be <code>"GBP"</code>.</td>
</tr>
<tr>
<td>title</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The title of the product as defined in the Google Play Console.</td>
</tr>
<tr>
<td>description</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The product description as defined in the Google Play Console.</td>
</tr>
</tbody>
</table>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="purchase">purchase</h1>
<p><strong>Google Play Billing Class:</strong> <a href="https://developer.android.com/reference/com/android/billingclient/api/Purchase">Purchase</a></p>
<p>This struct contains details on a single purchase.</p>
<p><br></p>
<table>
<thead>
<tr>
<th>Member</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>orderId</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A unique order identifier for the transaction. This identifier corresponds to the Google Payments order ID.</td>
</tr>
<tr>
<td>packageName</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The application package from which the purchase originated.</td>
</tr>
<tr>
<td>productId</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The product ID (SKU).</td>
</tr>
<tr>
<td>purchaseTime</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The time the product was purchased (as an integer). This is in milliseconds since the epoch (Jan 1, 1970).</td>
</tr>
<tr>
<td>purchaseState</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The state of purchase (an integer). Possible values are: 0. Unspecified State, 1. Purchased, 2. Pending.</td>
</tr>
<tr>
<td>purchaseToken</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>A token that uniquely identifies a purchase for a given item and user pair. This should be used for any server verification.</td>
</tr>
<tr>
<td>autoRenewing</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></td>
<td>Indicates whether the subscription renews automatically (will always be <code>false</code> for non-subscription purchases).</td>
</tr>
<tr>
<td>acknowledged</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The acknowledgement state of the in-app product. Possible values are: 0. Yet to be acknowledged, 1. Acknowledged.</td>
</tr>
</tbody>
</table>
<p><br></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="quick_start_guide.html" class="btn btn-neutral float-left" title="Quick Start Guide"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>YoYoGames 2024</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/YoYoGames/GMEXT-GooglePlayBilling" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="quick_start_guide.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/gml.min.js"></script>
      <script src="assets/js/gmext_script.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
